!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.timer=function(t,n){var i,r={autoStart:!0,initTime:60,max:999999,min:0},a=e(t),o={},u="timer",c=0,d={ready:"ready",playing:"playing",paused:"paused",stopped:"stopped"},m={},p=0;e.data(t,"timer",a),m={init:function(t){o=e.extend({},r,t),c=parseInt(o.initTime),i=o.autoStart?d.playing:d.paused,m.setup(),a.trigger(u+".start")},setup:function(){p=setInterval(function(){return!m.checkTimeout()&&void(i==d.playing&&(m.changeTime(-1),m.render()))},1e3)},checkTimeout:function(){return c<=0&&(clearInterval(p),a.trigger(u+".timeout"),i=d.stopped,!0)},changeTime:function(e){c+=parseInt(e),m.setTime(c)},setTime:function(e){e=e>o.max?o.max:e<o.min?o.min:e,a.trigger(u+"change"),m.render()},render:function(){a.text(c)}},a.methods={addTime:function(e){m.changeTime(e)},pause:function(){i=d.paused},play:function(){i=d.playing},getState:function(){return i},getTime:function(){return c}},m.init(n)},e.fn.timer=function(t){return void 0===t&&(t={}),"object"==typeof t?this.each(function(n,i){new e.timer(i,t)}):this.data("timer").methods[t]?this.data("timer").methods[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("Method "+t+" does not exist on jQuery.timer")}});